<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ohgiraffers.dosirak.admin.product.dao.ProductMapper">
<resultMap id="product" type="com.ohgiraffers.dosirak.admin.product.dto.productDTO">
    <id property="productName" column="PRODUCT_NAME"/>
    <result property="productCode" column="PRODUCT_CODE"/>
    <result property="productPrice" column="PRODUCT_PRICE"/>
    <result property="productStatus" column="PRODUCT_STATUS"/>
    <result property="productCategoryCode" column="PRODUCT_CATEGORY_CODE"/>
    <result property="productSummary" column="product_summary"/>
</resultMap>
    <select id="findAllProduct" resultMap="product">
        SELECT PRODUCT_NAME,PRODUCT_CODE,PRODUCT_PRICE,PRODUCT_STATUS,PRODUCT_CATEGORY_CODE
        FROM tbl_product;
    </select>
    <select id="productSelectList" resultMap="product">
        SELECT PRODUCT_NAME, PRODUCT_CODE, PRODUCT_PRICE, PRODUCT_STATUS, PRODUCT_CATEGORY_CODE
        FROM tbl_product
        <where>
            <if test="productName != null">
                AND PRODUCT_NAME LIKE CONCAT('%', #{productName}, '%')
            </if>
            <if test="productStatus != null">
                AND PRODUCT_STATUS = #{productStatus}
            </if>
            <if test="productCategoryCode != null">
                AND PRODUCT_CATEGORY_CODE = #{productCategoryCode}
            </if>
        </where>
    </select>
    <select id="getProductByCode" resultType="com.ohgiraffers.dosirak.admin.product.dto.productDTO">
        SELECT *
        FROM tbl_product
        WHERE PRODUCT_CODE = #{productCode};
    </select>
    <select id="productViewPage" resultMap="product">
        SELECT *
        FROM tbl_product;
    </select>
    <update id="productUpdate">
        UPDATE tbl_product
        SET
        PRODUCT_NAME=#{productName},
        PRODUCT_PRICE=#{productPrice},
        PRODUCT_STATUS=#{productStatus},
        product_Summary=#{productSummary},
        PRODUCT_CATEGORY_CODE=#{productCategoryCode}
        WHERE PRODUCT_CODE = #{productCode};
    </update>
    <insert id="insertProduction">
        INSERT tbl_product
        SET
        PRODUCT_NAME=#{productName},
        PRODUCT_PRICE=#{productPrice},
        PRODUCT_STATUS=#{productStatus},
        product_Summary=#{productSummary},
        PRODUCT_CATEGORY_CODE=#{productCategoryCode}
    </insert>
    <delete id="deleteProduct">
        DELETE FROM tbl_product
        WHERE PRODUCT_CODE = #{productCode};
    </delete>



</mapper>