<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ohgiraffers.dosirak.user.product.dao.ProductUserMapper">
    <resultMap id="product" type="com.ohgiraffers.dosirak.user.product.dto.ProductUserDTO">
        <id property="productName" column="PRODUCT_NAME"/>
        <result property="productCode" column="PRODUCT_CODE"/>
        <result property="productPrice" column="PRODUCT_PRICE"/>
        <result property="productStatus" column="PRODUCT_STATUS"/>
        <result property="productCategoryCode" column="PRODUCT_CATEGORY_CODE"/>
        <result property="productSummary" column="product_summary"/>
    </resultMap>
    <select id="findAllUserProduct" resultMap="product">
        SELECT PRODUCT_NAME,PRODUCT_CODE,PRODUCT_PRICE,PRODUCT_STATUS,PRODUCT_CATEGORY_CODE,product_summary
        FROM tbl_product;
    </select>
    <select id="viewProduct" resultMap="product">
        SELECT *
        FROM tbl_product
        WHERE PRODUCT_CODE = #{productCode};
    </select>
    <select id="productsListView" resultMap="product">
        SELECT *
        FROM tbl_product
        WHERE PRODUCT_CATEGORY_CODE IN (2);
    </select>

    <select id="getProductListBySubCategoryCode">
        SELECT *
        FROM TBL_PRODUCT P
        LEFT JOIN TBL_PRODUCT_CATEGORY C
        ON P.product_category_code = c.product_main_category_code
        WHERE c.product_sub_category_code = #{subCategoryCode}
    </select>


</mapper>